<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" style="height:100%" lang="en">
  <meta charset="UTF-8">
  <head>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"></script><!-- jQuery - https://jquery.com/ -->
    <script type="text/javascript" src="plugins/cookies/jquery.cookie.js"></script><!-- cookie: http://plugins.jquery.com/cookie/ -->
    <!-- LOCALIZATION -->
    <!--<script type="text/javascript" src="lang/lang.en.js"></script><!-- language localisation file -->
    <!--<script type="text/javascript" src="scripts/lang_funcs.js"></script><!-- language helper file -->
    <!-- SITE SETUP FUNCS -->
    <!--<script type="text/javascript" src="scripts/site_funcs.js"></script><!-- site setup helper file -->
    <!-- LEAFLET -->
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css"><!-- leaflet style def -->
    <link rel="stylesheet" type="text/css" href="styles/mapstyle.css"><!-- own leaflet style def -->
    <script type="text/javascript" src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script><!-- leaflet distribution -->
    <link rel="stylesheet" type="text/css" href="plugins/coordinates/src/Control.Coordinates.css"><!-- see: https://github.com/MrMufflon/Leaflet.Coordinates -->
    <!-- [if lte IE 8]><link rel="stylesheet" href="leaflet/plugins/coordinates/src/Control.Coordinates.ie.css" /><![endif] -->
    <script type="text/javascript" src="plugins/coordinates/src/Control.Coordinates.js"></script><!-- see: https://github.com/MrMufflon/Leaflet.Coordinates -->
    <script type="text/javascript" src="plugins/coordinates/src/util/NumberFormatter.js"></script><!-- see: https://github.com/MrMufflon/Leaflet.Coordinates -->
    <link rel="stylesheet" type="text/css" href="styles/font-awesome/css/font-awesome.css"><!-- font awesome (e.g. required by easybutton & sidebar) see: http://fontawesome.io/icons/ -->
    <!-- SIDEBAR -->
    <link rel="stylesheet" type="text/css" href="plugins/sidebar/leaflet-sidebar.css"><!-- see: https://github.com/Turbo87/sidebar-v2 -->
    <script type="text/javascript" src="plugins/sidebar/leaflet-sidebar.min.js"></script><!-- see: https://github.com/Turbo87/sidebar-v2 -->
    <!--<script type="text/javascript" src="scripts/sidebar_funcs.js"></script><!-- see: https://github.com/Turbo87/sidebar-v2 -->

    <!-- BOOTSTRAP (3.3.7) -->
    <!-- must be loaded below / after autocomplete! -->
    <link rel="stylesheet" type="text/css" href="plugins/bootstrap/bootstrap/css/bootstrap.min.css"><!-- see: http://getbootstrap.com/javascript/ -->
    <script type="text/javascript" src="plugins/bootstrap/bootstrap/js/bootstrap.min.js"></script><!-- see: http://getbootstrap.com/javascript/ -->
    <script type="text/javascript" src="plugins/bootstrap/tabscollapse/bootstrap-tabcollapse.js"></script><!-- bootstrap collapsable tabs plugin - see: https://github.com/flatlogic/bootstrap-tabcollapse -->
    <script type="text/javascript" src="plugins/bootstrap/autohidingnavbar/jquery.bootstrap-autohidingnavbar.min.js"></script><!-- bootstrap auto hiding navbar plugin - see: http://www.virtuosoft.eu/code/bootstrap-autohidingnavbar/ -->
    <link rel="stylesheet" type="text/css" href="plugins/bootstrap/slider/bootstrap-slider.min.css"><!-- bootstrap slider plugin - see: https://github.com/seiyria/bootstrap-slider -->
    <script type="text/javascript" src="plugins/bootstrap/slider/bootstrap-slider.min.js"></script><!-- bootstrap slider plugin - see: https://github.com/seiyria/bootstrap-slider -->
    <link rel="stylesheet" type="text/css" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css"><!-- bootstrap toogle plugin - see: http://www.bootstraptoggle.com/ -->
    <script type="text/javascript" src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script><!-- bootstrap toogle plugin - see: http://www.bootstraptoggle.com/ -->
    <!-- MATHJAX -->
    <!-- MathJax Online Editor: http://www.codecogs.com/latex/eqneditor.php -->

    <!-- JQUERY UI -->
    <script type="text/javascript" src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script><!-- jquery ui: https://jqueryui.com/ -->
    <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css"><!-- jquery ui: https://jqueryui.com/ -->
    <!-- ESRI PLUGINS -->
    <script type="text/javascript" src="https://unpkg.com/esri-leaflet@2.0.7"></script><!-- see: http://esri.github.io/esri-leaflet/examples/ -->
    <!-- SHAPEFILE -->
    <script type="text/javascript" src="plugins/shapefile/leaflet.shpfile.js"></script><!-- leaflet shapefile plugin - see: https://github.com/calvinmetcalf/leaflet.shapefile -->
    <!-- PLOTLY -->
    <script type="text/javascript" src="plugins/plotly/js/plotly-latest.min.js"></script><!-- plotly plugin: https://plot.ly/ -->
    <script type="text/javascript" src="plugins/shapefile/shp.js"></script><!-- leaflet shapefile plugin - see: https://github.com/calvinmetcalf/leaflet.shapefile -->
    <!-- LOOSE ADDITIONS -->
    <!--<script type="text/javascript" src="plugins/finger/jquery.finger.min.js"></script><!-- jQuery finger plugin - see: https://github.com/ngryman/jquery.finger -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/3.0.3/layer/tile/Bing.min.js"></script>
    <script type="text/javascript" src="plugins/turf/turf.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="plugins/leaflet-bing-layer/leaflet-bing-layer.min.js"></script> <!-- https://github.com/digidem/leaflet-bing-layer, https://www.igismap.com/add-different-base-map-layers-using-leaflet-js/ -->
    <!-- MAP FRAMEWORK SCRIPTS -->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise"></script>
    <script type="text/javascript" src="scripts/oop/application.js"></script><!-- site applicaation class -->
    <script type="text/javascript" src="scripts/oop/map.js"></script><!-- base framework map class -->
    <script type="text/javascript" src="scripts/oop/data/data.js"></script><!-- data class -->
    <script type="text/javascript" src="scripts/oop/data/entry.js"></script><!-- gmpe class -->
    <script type="text/javascript" src="scripts/oop/data/data_display.js"></script><!-- table class -->
    <script type="text/javascript" src="scripts/oop/style.js"></script><!-- framework layer style definition wrapper class -->
    <script type="text/javascript" src="scripts/oop/layerstyle.js"></script><!-- framework layer styling class -->
    <script type="text/javascript" src="scripts/oop/legend.js"></script><!-- framework layer legend class -->
    <script type="text/javascript" src="scripts/oop/layer.js"></script><!-- framework vector overlay parent class -->
    <script type="text/javascript" src="scripts/oop/grid.js"></script><!-- map grid class -->
    <script type="text/javascript" src="scripts/oop/baselayer.js"></script><!-- framework tile baselayer class -->
    <script type="text/javascript" src="scripts/oop/jsonlayer.js"></script><!-- framework json overlay class -->
    <script type="text/javascript" src="scripts/oop/shpjsonlayer.js"></script><!-- framework shp overlay class -->
    <script type="text/javascript" src="scripts/oop/zipfilereader.js"></script><!-- framework zip filereader class -->
    <script type="text/javascript" src="scripts/oop/instancestate.js"></script><!-- framework zip instacestate class -->
    <script type="text/javascript" src="scripts/oop/plot.js"></script><!-- class to wrap Plotly plots -->
  </head>

  <body id="body"> <!-- body -->

    <div id="gfz_obm_site_wrapper" class="">

      <!-- navbar -->
      <nav id="gfz_obm_scrollspy" class="navbar navbar-inverse navbar-fixed-top" >

        <div class="container-fluid">
          <!-- collapse button -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gfz_obm_navbar_collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="javascript:void(0)">OBM Completeness</a>
          </div>
          <!-- navbar entries -->
          <div class="collapse navbar-collapse" id="gfz_obm_navbar_collapse">
            <ul class="nav navbar-nav">
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" title="Projects">Projects
                  <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="http://www.openbuildingmap.org">OpenBuildingMap</a></li>
                </ul>
              </li>
              <li><a href="#gfz_obm_site_wrapper" title="Map">Map</a></li>
              <li><a href="#data" title="Data">Data</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
              <li><form class="navbar-form navbar-input-group">
                <div class="form-group row">
                  <div class="col-xs-4">
                    <input id="gfz_obm_bbox_coords" class="form-control input-sm" placeholder="SW lon, SW lat, NE lon, NE lat" >
                  </div>
                </div>
              </form></li>
              <li><a id="gfz_obm_download_grid" href="#"><span class="glyphicon glyphicon-download-alt"></span>Download</a></li>
              <li><a href="#"><span class="glyphicon glyphicon-user"></span>User</a></li>
              <li><a href="#"><span class="glyphicon glyphicon-log-in"></span>Login</a></li>
            </ul>
          </div>
        </div>
      </nav> <!-- /navbar -->

      <!-- modal -->
      <div id="myModal" class="modal" >
        <div id="myModal" class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header modal-frame-element">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Map</h4>
            </div>
            <div class="modal-body container-fluid">
              <div id="gfz_obm_map_wrapper" class="map_wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <!-- here be the map  -->
                <div id="gfz_obm_leafletmap_modal" class="sidebar-map"></div>
              </div>
            </div>
            <div class="modal-footer modal-frame-element">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Okay</button>
            </div>
          </div> <!-- /.modal-content -->
        </div> <!-- /.modal-dialog -->
      </div> <!-- /.modal -->

      <div id="map" class="container-fluid">
        <!-- map wrapper -->
        <div id="gfz_obm_map_wrapper" class="map_wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <!-- sidebar top div -->
          <div id="gfz_obm_sidebar" class="sidebar collapsed">
            <!--echo the registered sidebar menu tabs -->
            <div class="sidebar-tabs">
              <ul id="gfz_obm_sidebar_topentries" role="tablist">
                <!-- here be dynamically filled sidebar items -->
                <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
              </ul>
              <ul id="gfz_obm_sidebar_bottomentries" role="tablist">
                <!-- here be dynamically filled sidebar items -->
                <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
              </ul>
            </div><!-- /.sidebar-tabs -->

            <div id="gfz_obm_sidebar_content" class="sidebar-content">
              <!-- echo all entries here -->
            </div><!-- /.sidebar-content -->
          </div><!-- /.sidebar /#sidebar -->
          <!-- here be the map  -->
          <div id="gfz_obm_leafletmap" class="sidebar-map"></div>
        </div><!-- /#fz_gmpe_map_wrapper  -->
      </div>



      <!-- TODO echo_lower_wrapper() -->
      <!-- <div id="data" class="container-fluid"> -->
      <!-- <div class="row"> <!-- nav tabs row -->
      <!--  -->
      <!-- <nav id="gfz_obm_navbar_scrollspy" class="navbar"> <!-- NAV -->
      <!-- START tablist -->
      <!-- <div id="gfz_obm_navlist_wrapper" class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> -->
      <!-- <ul class="nav nav-tabs nav-justified" role="tablist" id="gfz_obm_tabs"> -->
      <!-- tab 1 -->
      <!-- <li role="presentation"> -->
      <!-- <a class="gfz_obm_tablink" href="#gfz_obm_tab1" aria-controls="gfz_obm_tab1" role="tab" data-toggle="tab"> -->
      <!-- Tab 1 (Input View) -->
      <!-- </a> -->
      <!-- </li> -->
      <!-- tab 2 -->
      <!-- <li role="presentation"> -->
      <!-- <a class="gfz_obm_tablink" href="#gfz_obm_tab2" aria-controls="gfz_obm_tab2" role="tab" data-toggle="tab"> -->
      <!-- Tab 2 (Data View) -->
      <!-- </a> -->
      <!-- </li> -->
      <!-- tab 3 -->
      <!-- <li role="presentation"> -->
      <!-- <a class="gfz_obm_tablink" href="#gfz_obm_tab3" aria-controls="gfz_obm_tab3" role="tab" data-toggle="tab"> -->
      <!-- Tab 3 -->
      <!-- <span class="gfz_obm_localisation" value-local="HELP"></span> -->
      <!-- </a> -->
      <!-- </li> -->
      <!-- </ul> <!-- nav tabs list -->
      <!-- </div> <!-- nav tab col -->
      <!-- //END tablist -->

      <!-- </nav> <!-- / NAV #gfz_obm_navbar_scrollspy -->
      <!-- </div> <!-- nav tab row --><!--  -->

      <!-- </div><!--  -->

      <!-- <div id="gfz_obm_tabpanes" class="tab-content row" > -->
      <!-- TODO other tabs contents -->
      <!-- tab 1 -->
      <!-- <div id="gfz_obm_tab1" role="tabpanel" class="tab-pane active tabpanel_content_wrapper container-fluid"> -->

      <!-- <div id="gfz_obm_data_input_wrapper" class="container" style="float:left; max-width: 700px"> -->

      <!-- Tab panes -->
      <!-- <div id="gfz_obm_tab1panes" class="tab-content row" > -->
      <!-- full width tab content container (-fluid) -->
      <!-- <div id="gfz_obm_input_tab" name="gfz_obm_input_tab" role="tabpanel" -->
      <!-- class="tab-pane active tabpanel_content_wrapper container-fluid" area-labelledby="maptab"> -->
      <!-- <div id="gfz_obm_tab1panes_row" class="row panel panel-default"> -->
      <!-- <div id="gfz_obm_map_controls_wrapper" class="panel-heading map_controls_wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12"> -->

      <!-- ... accordion href link -->
      <!-- <div class="panel-heading" role="tab" id="gfz_obm_heading_accordion"> -->
      <!-- <h4 class="panel-title"> -->
      <!-- <a data-toggle="collapse" data-parent="#gfz_obm_input_tab" href="#gfz_obm_btngroup_wrapper_generalpurpose" -->
      <!-- aria-expanded="true" aria-controls="gfz_obm_btngroup_generalpurpose"> -->
      <!-- <div class="gfz_obm_seperator"></div> -->
      <!-- <div class="gfz_obm_ui_heading"> -->
      <!-- <span><strong class="gfz_obm_localisation" value-local="FIXME_NO_TERM"></strong></span> -->
      <!-- </div> -->
      <!-- </a> -->
      <!-- </h4> -->
      <!-- </div> -->

      <!-- ... button group -->
      <!-- <div class="panel-collapse collapse out" id="gfz_obm_btngroup_wrapper_generalpurpose" role="tabpanel" -->
      <!-- aria-labelledby="gfz_obm_heading_accordion"> -->
      <!-- <div class="btn-group"><!--  -->

      <!-- <div class="dropdown"> -->
      <!-- <button class="btn btn-default btn-block dropdown-toggle gfz_obm_ui_element" -->
      <!-- type="button" id="fractile_dropdown_button" data-toggle="dropdown" -->
      <!-- aria-haspopup="true" aria-expanded="false"> -->
      <!-- <span class="gfz_obm_localisation" value-local="FIXME_NO_TERM"></span>:<!--  -->

      <!-- <span class="caret"></span> -->
      <!-- </button> -->
      <!-- TODO - dropdown values gmpe?  -->
      <!-- <ul id="fractile_dropdown_list" class="dropdown-menu mapctrl-dropdown-menu gfz_obm_dropdown-menu" -->
      <!-- aria-labelledby="fractile_dropdown_button" role="menu"> -->
      <!-- <li><a href="javascript:void(0)" data-value="FIXME_SOMETHING"> -->
      <!-- <span class="gfz_obm_localisation" value-local="FIXME_NO_TERM"></span> -->
      <!-- </a></li> -->
      <!-- <li><a href="javascript:void(0)" data-value="FIXME_SOMETHING"> -->
      <!-- <span class="gfz_obm_localisation" value-local="FIXME_NO_TERM"></span> -->
      <!-- </a></li> -->
      <!-- <li><a href="javascript:void(0)" data-value="FIXME_SOMETHING"> -->
      <!-- <span class="gfz_obm_localisation" value-local="FIXME_NO_TERM"></span> -->
      <!-- </a></li> -->
      <!-- </ul> -->
      <!-- </div><!--  -->

      <!-- </div> -->
      <!-- </div><!--  -->

      <!-- </div> -->
      <!-- </div> -->
      <!-- </div> -->
      <!-- </div><!--  -->

      <!-- </div> -->
      <!-- </div> -->
      <!-- tab 2 -->
      <!-- <div id="gfz_obm_tab2" role="tabpanel" class="tab-pane tabpanel_content_wrapper container-fluid"> -->
      <!-- <div class="container" style="float:left; max-width: 700px"> -->
      <!-- <div class="row"> -->

      <!-- <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"> -->
      <!-- dropdown -->
      <!-- <div class="dropdown"> -->
      <!-- <button class="btn btn-primary btn-block dropdown-toggle" type="button" data-toggle="dropdown"> -->
      <!-- Sort by&nbsp;<span class="caret"></span> -->
      <!-- </button> -->
      <!-- <ul class="dropdown-menu"> -->
      <!-- <li><a id="gfz_obm_sort_by_zone" href="javascript:void(0)">Zone</a></li> -->
      <!-- <li><a id="gfz_obm_sort_by_gmpe" href="javascript:void(0)">GMPE</a></li> -->
      <!-- </ul> -->
      <!-- </div> -->
      <!-- </div><!--  -->

      <!-- <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"> -->
      <!-- plot button -->
      <!-- <button id="gfz_obm_button_plot" type="button" class="btn btn-primary btn-block">Plot</button> -->
      <!-- </div> -->
      <!-- </div> -->
      <!-- <div class="row"> -->
      <!-- table container -->
      <!-- <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> -->
      <!-- <div id="gfz_obm_data_table_wrapper"> -->
      <!--<p>Contextual classes: .active, .success, .info, .warning, and .danger.</p>-->
      <!-- </div> -->
      <!-- </div> -->
      <!-- </div> -->
      <!-- </div> -->
      <!-- </div> -->
      <!-- tab 3 -->
      <!-- <div id="gfz_obm_tab3" role="tabpanel" class="tab-pane tabpanel_content_wrapper container-fluid"> -->
      <!-- TODO -->
      <!-- </div> -->
      <!-- </div> <!-- /End tab panes -->

    </div><!-- /#gfz_gmgpe_site_wrapper -->
  </body> <!-- /body -->

  <!-- --- add scripts last --- -->
  <script>
   /*** fields **/
   var myapplication,
       /** sidebar entries */
       top_entries, bottom_entries,
       /** zip filereader shp
        * this handels zip compressed shp layers that are added to the application */
       zipfilereader,
       /** attribution for raster tile layer. this is displayed at the bottom right corner as per leaflet behavior */
       /** @global */
       osm_attrib = '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
       /** @global */
       topo_attrib = 'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',
       /* base layers */
       base_layers = [
         /* ['OSM DE', 'http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', osm_attrib], */
         /* ['Mapnik', 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', osm_attrib], */
         /* ['B&W', 'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', osm_attrib], */
         /* ['Topo', 'http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', topo_attrib], */

         /* ['Google Streets', 'http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', ''],
          * ['Google Hybrid', 'http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}', ''],
          * ['Google Satellite', 'http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', ''],
          * ['Google Terrain', 'http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}', ''], */
       ],
       /* overlays = [['all 03', 'data/polygons/countries/all03.geojson']], */
       overlays = [['all05', 'data/polygons/countries/all.simple.0.005.geojson']],
       /* overlays = [['all05', 'data/polygons/countries/test.UY.geojson']], */
       feature = 'completeness',
       /* feature = 'name', */
       /** @global */
       feature_style_def = {'0':'#e4808c',
                            '1':'#12a8f3'},
       ignore_keys = ['other_tags'];
   /*** /fields **/

   /*** doc done loading - let's add some stuff **/
   $( document ).ready(function() {
     /** we have JS, so hide no js warning and show the site */
     $('#noJS').hide();
     /** site */
     myapplication = new Application(base_layers, /*overlays*/);
     $('#'+myapplication.ID_PREFIX+'_site_wrapper').show();
     /* set a style for the vector layer */
     /* myapplication.overlay_style(feature, feature_style_def); */
     /* random style for @feature */
     /* myapplication.overlay_style('Completeness grid', feature, null, ['completeness', 'ISO3166-1']); */
     myapplication.ignore(ignore_keys);
     /** init the map */
     myapplication.map_init();

     /* console.log('... overlays', myapplication.map_object().overlays()); */

     /** we may edit the style later on */
     /* myapplication.map_object().overlays()[0].style(new Style(myapplication._layer_style_def, feature, feature_style_def)); */

   }());

  </script>

</html>
